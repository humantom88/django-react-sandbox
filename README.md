# Starter Kit for Django And React Application

## Installation

```
pip install -r requirements.txt
```

## Creating project

```
django-admin startproject djangoreactproject
```

Edit settings.py

```python
...
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'rest_framework',
    'corsheaders'
]

...

MIDDLEWARE = [
...
'django.contrib.messages.middleware.MessageMiddleware',
'django.middleware.clickjacking.XFrameOptionsMiddleware',
'corsheaders.middleware.CorsMiddleware'
]


...
CORS_ORIGIN_ALLOW_ALL = False

CORS_ORIGIN_WHITELIST = (
       'localhost:3000',
)
...
```

Making new application "customers"

```
python manage.py startapp customers
```

Adding new application into settings.py
```python
...
INSTALLED_APPS = [
    ...
    'rest_framework',
    'corsheaders',
    'customers'
]
...
```

Run first migrations
```
python manage.py migrate
```

Run server for the first time
```
python manage.py runserver
```

Create frontend
```
npx create-react-app frontend
```

Add bootstrap.css to App.css
```js
// ~/djangoreactproject/frontend/src/App.css
@import  'https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css';
```

Add Customer model to models.py
```python
from django.db import models

# Create your models here.
class Customer(models.Model):
    first_name = models.CharField("First name", max_length=255)
    last_name = models.CharField("Last name", max_length=255)
    email = models.EmailField()
    phone = models.CharField(max_length=20)
    address =  models.TextField(blank=True, null=True)
    description = models.TextField(blank=True, null=True)
    createdAt = models.DateTimeField("Created At", auto_now_add=True)

    def __str__(self):
        return self.first_name

```

Make migrations and migrate
```
python manage.py makemigrations
python manage.py migrate
```

Make custom sql insert migration
```
python manage.py makemigrations --empty --name customers customers
```

Edit migration and add initial customer
```python
# Generated by Django 3.0.8 on 2020-07-26 17:21

from django.db import migrations

def create_data(apps, schema_editor):
    Customer = apps.get_model('customers', 'Customer')
    Customer(
      first_name="Customer 001",
      last_name="Customer 001", email="customer001@email.com",
      phone="00000000",
      address="Customer 000 Address",
      description= "Customer 001 description"
    ).save()

class Migration(migrations.Migration):

    dependencies = [
        ('customers', '0001_initial'),
    ]

    operations = [
        migrations.RunPython(create_data),
    ]
```

Migrate again
